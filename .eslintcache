[{"D:\\workspace_node\\member-manager-react\\src\\reportWebVitals.js":"1","D:\\workspace_node\\member-manager-react\\src\\utils\\axios.js":"2","D:\\workspace_node\\201222\\member-manager-react\\src\\index.jsx":"3","D:\\workspace_node\\201222\\member-manager-react\\src\\reportWebVitals.js":"4","D:\\workspace_node\\201222\\member-manager-react\\src\\App.jsx":"5","D:\\workspace_node\\201222\\member-manager-react\\src\\utils\\axios.js":"6","D:\\workspace_node\\201222\\member-manager-react\\src\\components\\LoadingBar.jsx":"7","D:\\workspace_node\\201222\\member-manager-react\\src\\views\\Home.jsx":"8","D:\\workspace_node\\201222\\member-manager-react\\src\\components\\HeaderMenu.jsx":"9","D:\\workspace_node\\201222\\member-manager-react\\src\\views\\CreateMember.jsx":"10","D:\\workspace_node\\201222\\member-manager-react\\src\\components\\HeaderTop.jsx":"11","D:\\workspace_node\\201222\\member-manager-react\\src\\views\\About.jsx":"12","D:\\workspace_node\\201222\\member-manager-react\\src\\views\\ShowMembers.jsx":"13","D:\\workspace_node\\201222\\member-manager-react\\src\\views\\Login.jsx":"14","D:\\workspace_node\\201222\\member-manager-react\\src\\components\\AlertPopup.jsx":"15","D:\\workspace_node\\201222\\member-manager-react\\src\\components\\GoogleLogin.jsx":"16"},{"size":375,"mtime":1605485547498,"results":"17","hashOfConfig":"18"},{"size":308,"mtime":1608193984885,"results":"19","hashOfConfig":"18"},{"size":361,"mtime":1608523919571,"results":"20","hashOfConfig":"21"},{"size":390,"mtime":1608524191476,"results":"22","hashOfConfig":"21"},{"size":4982,"mtime":1608646668735,"results":"23","hashOfConfig":"21"},{"size":308,"mtime":1608516749893,"results":"24","hashOfConfig":"21"},{"size":197,"mtime":1608646799148,"results":"25","hashOfConfig":"21"},{"size":11208,"mtime":1608650948152,"results":"26","hashOfConfig":"21"},{"size":505,"mtime":1608646799148,"results":"27","hashOfConfig":"21"},{"size":13818,"mtime":1608646799159,"results":"28","hashOfConfig":"21"},{"size":1474,"mtime":1608646799164,"results":"29","hashOfConfig":"21"},{"size":309,"mtime":1608646882769,"results":"30","hashOfConfig":"21"},{"size":2023,"mtime":1608646799250,"results":"31","hashOfConfig":"21"},{"size":7882,"mtime":1608651192089,"results":"32","hashOfConfig":"21"},{"size":654,"mtime":1608646696185,"results":"33","hashOfConfig":"21"},{"size":3532,"mtime":1608646799148,"results":"34","hashOfConfig":"21"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"37"},"rl2o5f",{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"37"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"82xr10",{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"42"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"70","usedDeprecatedRules":"42"},"D:\\workspace_node\\member-manager-react\\src\\reportWebVitals.js",[],[],"D:\\workspace_node\\member-manager-react\\src\\utils\\axios.js",[],"D:\\workspace_node\\201222\\member-manager-react\\src\\index.jsx",[],["71","72","73","74","75","76"],"D:\\workspace_node\\201222\\member-manager-react\\src\\reportWebVitals.js",[],"D:\\workspace_node\\201222\\member-manager-react\\src\\App.jsx",["77","78","79"],"import React, { Suspense } from 'react';\r\nimport {\r\n  BrowserRouter as Router, Switch, Route, Redirect,\r\n} from 'react-router-dom';\r\nimport HeaderTop from './components/HeaderTop';\r\nimport HeaderMenu from './components/HeaderMenu';\r\nimport Home from './views/Home';\r\nimport ShowMembers from './views/ShowMembers';\r\nimport About from './views/About';\r\nimport CreateMember from './views/CreateMember';\r\nimport Login from './views/Login';\r\nimport BaseAxios from './utils/axios';\r\nimport LoadingBar from './components/LoadingBar';\r\nimport './App.css';\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      axios: BaseAxios(),\r\n      menus: [\r\n        {\r\n          id: 0,\r\n          path: '/home',\r\n          name: '메인',\r\n        },\r\n        {\r\n          id: 1,\r\n          path: '/show-members',\r\n          name: '회원관리',\r\n        },\r\n        {\r\n          id: 2,\r\n          path: '/about',\r\n          name: 'About',\r\n        },\r\n      ],\r\n      hasAuth: false,\r\n      imageUrl: '',\r\n      name: '',\r\n      isLoading: false,\r\n    };\r\n    this.checkAuth = this.checkAuth.bind(this);\r\n    this.handleLogin = this.handleLogin.bind(this);\r\n    this.invalidateAuth = this.invalidateAuth.bind(this);\r\n    this.handleLogout = this.handleLogout.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { axios } = this.state;\r\n    const loginType = sessionStorage.getItem('login-type');\r\n    const token = sessionStorage.getItem('token');\r\n    axios.defaults.headers.loginType = loginType;\r\n    axios.defaults.headers.token = token;\r\n    this.checkAuth();\r\n  }\r\n\r\n  handleLogin(loginType, user) {\r\n    const { axios } = this.state;\r\n    sessionStorage.setItem('login-type', loginType);\r\n    sessionStorage.setItem('token', user.token);\r\n    sessionStorage.setItem('imageUrl', user.imageUrl);\r\n    sessionStorage.setItem('name', user.name);\r\n    axios.defaults.headers.loginType = loginType;\r\n    axios.defaults.headers.token = user.token;\r\n    this.setState({\r\n      hasAuth: true,\r\n      imageUrl: user.imageUrl,\r\n      name: user.name,\r\n    });\r\n  }\r\n\r\n  handleLogout() {\r\n    this.invalidateAuth();\r\n  }\r\n\r\n  invalidateAuth() {\r\n    const { axios } = this.state;\r\n    sessionStorage.setItem('login-type', null);\r\n    sessionStorage.setItem('token', null);\r\n    sessionStorage.setItem('imageUrl', null);\r\n    sessionStorage.setItem('name', null);\r\n    axios.defaults.headers.loginType = null;\r\n    axios.defaults.headers.token = null;\r\n    this.setState({\r\n      hasAuth: false,\r\n      imageUrl: '',\r\n      name: '',\r\n    });\r\n  }\r\n\r\n  checkAuth() {\r\n    this.setState({ isLoading: true });\r\n    BaseAxios()\r\n      .get('/api/login/has-auth')\r\n      .then((response) => {\r\n        console.log('[App]', '/api/login/has-auth', response);\r\n        const {\r\n          hasAuth, loginType, token, imageUrl, name,\r\n        } = response.data;\r\n\r\n        if (hasAuth) {\r\n          this.handleLogin(loginType, { token, imageUrl, name });\r\n        } else {\r\n          this.invalidateAuth();\r\n        }\r\n      })\r\n      .finally(() => {\r\n        this.setState({ isLoading: false });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    console.log('[App]', 'render()');\r\n    console.log('[App]', 'state = ', this.state);\r\n    const {\r\n      menus, hasAuth, imageUrl, name, isLoading,\r\n    } = this.state;\r\n\r\n    return (\r\n      <div id=\"app\" className=\"App\">\r\n        <div className=\"header\">\r\n          <Router>\r\n            <HeaderTop\r\n              hasAuth={hasAuth}\r\n              imageUrl={imageUrl}\r\n              name={name}\r\n              doLogout={this.handleLogout}\r\n            />\r\n            <HeaderMenu menus={menus} />\r\n            <Suspense fallback=\"\">\r\n              <Switch>\r\n                <Route path=\"/home\" component={Home} />\r\n                <Route\r\n                  path=\"/show-members\"\r\n                  render={() => (\r\n                    <ShowMembers\r\n                      invalidateAuth={this.invalidateAuth}\r\n                    />\r\n                  )}\r\n                />\r\n                <Route path=\"/about\" component={About} />\r\n                <Route path=\"/create-member\" component={CreateMember} />\r\n                <Route\r\n                  path=\"/login\"\r\n                  render={() => (\r\n                    <Login\r\n                      onLoginSuccessCallback={this.handleLogin}\r\n                      invalidateAuth={this.invalidateAuth}\r\n                    />\r\n                  )}\r\n                />\r\n                {/*\r\n                <Route path=\"/show-member\" component={ShowMember} />\r\n                <Route path=\"/error\" component={Error} />\r\n                */}\r\n                <Route path=\"/\">\r\n                  <Redirect to=\"/home\" />\r\n                </Route>\r\n              </Switch>\r\n            </Suspense>\r\n          </Router>\r\n        </div>\r\n        <div className=\"footer\">&copy;2020</div>\r\n        {isLoading && <LoadingBar />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","D:\\workspace_node\\201222\\member-manager-react\\src\\utils\\axios.js",[],"D:\\workspace_node\\201222\\member-manager-react\\src\\components\\LoadingBar.jsx",[],"D:\\workspace_node\\201222\\member-manager-react\\src\\views\\Home.jsx",[],"D:\\workspace_node\\201222\\member-manager-react\\src\\components\\HeaderMenu.jsx",[],"D:\\workspace_node\\201222\\member-manager-react\\src\\views\\CreateMember.jsx",[],"D:\\workspace_node\\201222\\member-manager-react\\src\\components\\HeaderTop.jsx",[],"D:\\workspace_node\\201222\\member-manager-react\\src\\views\\About.jsx",[],"D:\\workspace_node\\201222\\member-manager-react\\src\\views\\ShowMembers.jsx",[],"D:\\workspace_node\\201222\\member-manager-react\\src\\views\\Login.jsx",["80","81","82","83"],"D:\\workspace_node\\201222\\member-manager-react\\src\\components\\AlertPopup.jsx",[],"D:\\workspace_node\\201222\\member-manager-react\\src\\components\\GoogleLogin.jsx",["84","85"],"import React from 'react';\nimport PropTypes from 'prop-types';\nimport LoadingBar from './LoadingBar';\nimport BaseAxios from '../utils/axios';\nimport './GoogleLogin.css';\nimport Logo from '../assets/google_logo.png';\n\nclass GoogleLogin extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirectUri: `${window.location.origin}/login`,\n      scope: [\n        'https://www.googleapis.com/auth/userinfo.email',\n        'https://www.googleapis.com/auth/userinfo.profile',\n        'openid',\n      ].join(' '),\n      clientId: `${process.env.REACT_APP_GOOGLE_LOGIN_CLIENT_ID}`,\n      state: `${process.env.REACT_APP_GOOGLE_LOGIN_STATE}`,\n    };\n    this.handleKeyUp = this.handleKeyUp.bind(this);\n  }\n\n  componentDidMount() {\n    const { onSuccess, onFailure } = this.props;\n    const { state, redirectUri } = this.state;\n    let isMounted = true;\n\n    // Google query-string 검사\n    const stateRegex = /state=([^&#/]+)/.exec(window.location.href);\n    if ((stateRegex) && (stateRegex.length > 1) && (stateRegex[1] === state)) {\n      const codeRegex = /code=([^&#/]+)/.exec(window.location.href);\n      if (codeRegex) {\n        if (codeRegex.length > 1) {\n          const params = {\n            loginType: 'google',\n            code: decodeURIComponent(codeRegex[1]),\n            state: decodeURIComponent(stateRegex[1]),\n            redirectUri,\n          };\n\n          this.setState({ isLoading: true });\n          BaseAxios()\n            .post('/api/login/oauth', params)\n            .then((response) => {\n              console.log('[GoogleLogin]', '/api/login/oauth', response);\n              const {\n                hasAuth, token, imageUrl, name,\n              } = response.data;\n\n              if (hasAuth) {\n                isMounted = false;\n                onSuccess({\n                  hasAuth,\n                  token,\n                  imageUrl,\n                  name,\n                });\n              } else {\n                onFailure('Google 인증 실패');\n              }\n            })\n            .catch((err) => {\n              console.log('[GoogleLogin', err);\n            })\n            .finally(() => {\n              if (isMounted) {\n                this.setState({ isLoading: false });\n              }\n            });\n        }\n      }\n    }\n  }\n\n  handleClick() {\n    document.querySelector('#google-login-form').submit();\n  }\n\n  handleKeyUp(e) {\n    if (e.key === 'g') {\n      this.handleClick();\n    }\n  }\n\n  render() {\n    const {\n      redirectUri, scope, clientId, state,\n    } = this.state;\n    const { isLoading } = this.state;\n\n    return (\n      <div className=\"google-login-btn\" onClick={this.handleClick} onKeyUp={this.handleKeyUp}>\n        <form\n          id=\"google-login-form\"\n          method=\"GET\"\n          action=\"https://accounts.google.com/o/oauth2/v2/auth\"\n        >\n          <input type=\"hidden\" name=\"redirect_uri\" value={redirectUri} />\n          <input type=\"hidden\" name=\"response_type\" value=\"code\" />\n          <input type=\"hidden\" name=\"access_type\" value=\"offline\" />\n          <input type=\"hidden\" name=\"scope\" value={scope} />\n          <input type=\"hidden\" name=\"client_id\" value={clientId} />\n          <input type=\"hidden\" name=\"state\" value={state} />\n        </form>\n        <img className=\"logo\" src={Logo} alt=\"google\" />\n        {isLoading && <LoadingBar />}\n      </div>\n    );\n  }\n}\n\nGoogleLogin.propTypes = {\n  onSuccess: PropTypes.func.isRequired,\n  onFailure: PropTypes.func.isRequired,\n};\n\nexport default GoogleLogin;\n",{"ruleId":"86","replacedBy":"87"},{"ruleId":"88","replacedBy":"89"},{"ruleId":"90","replacedBy":"91"},{"ruleId":"92","replacedBy":"93"},{"ruleId":"94","replacedBy":"95"},{"ruleId":"96","replacedBy":"97"},{"ruleId":"98","severity":1,"message":"99","line":97,"column":9,"nodeType":"100","messageId":"101","endLine":97,"endColumn":20},{"ruleId":"98","severity":1,"message":"99","line":114,"column":5,"nodeType":"100","messageId":"101","endLine":114,"endColumn":16},{"ruleId":"98","severity":1,"message":"99","line":115,"column":5,"nodeType":"100","messageId":"101","endLine":115,"endColumn":16},{"ruleId":"98","severity":1,"message":"99","line":70,"column":5,"nodeType":"100","messageId":"101","endLine":70,"endColumn":16},{"ruleId":"98","severity":1,"message":"99","line":85,"column":5,"nodeType":"100","messageId":"101","endLine":85,"endColumn":16},{"ruleId":"98","severity":1,"message":"99","line":92,"column":5,"nodeType":"100","messageId":"101","endLine":92,"endColumn":16},{"ruleId":"98","severity":1,"message":"99","line":133,"column":9,"nodeType":"100","messageId":"101","endLine":133,"endColumn":20},{"ruleId":"98","severity":1,"message":"99","line":46,"column":15,"nodeType":"100","messageId":"101","endLine":46,"endColumn":26},{"ruleId":"98","severity":1,"message":"99","line":64,"column":15,"nodeType":"100","messageId":"101","endLine":64,"endColumn":26},"lines-around-directive",["102"],"no-spaced-func",["103"],"global-require",[],"no-buffer-constructor",[],"no-new-require",[],"no-path-concat",[],"no-console","Unexpected console statement.","MemberExpression","unexpected","padding-line-between-statements","func-call-spacing"]